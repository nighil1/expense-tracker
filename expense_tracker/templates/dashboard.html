<!DOCTYPE html>
<html>
<head>
    <title>AI Expense Tracker</title>

    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <!-- CHART JS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

<div class="dashboard">

<h2>ğŸ¤– AI Expense Tracker</h2>

<!-- ADD EXPENSE -->
<div class="section">
<h3>â• Add Expense</h3>
<form method="post">
    <input name="amount" placeholder="Amount â‚¹" required>
    <input name="description" placeholder="Description" required>
    <button>Add Expense</button>
</form>
</div>

<!-- ADD INCOME -->
<div class="section">
<h3>ğŸ’° Add Income</h3>
<form method="post" action="/add_income">
    <input name="income" placeholder="Income â‚¹" required>
    <button>Add Income</button>
</form>
</div>

<!-- GRAPHS -->
<div class="section">
<h3>ğŸ“ˆ Overview</h3>
<canvas id="barChart"></canvas>
</div>

<div class="section">
<h3>ğŸŸ¢ Expense Breakdown</h3>
<canvas id="donutChart"></canvas>
</div>

<!-- TOTALS -->
<div class="section">
<h3>ğŸ“Š Totals</h3>
<p><b>Income:</b> â‚¹{{income}}</p>
<p><b>Expense:</b> â‚¹{{expense}}</p>
</div>

<!-- AI FEEDBACK -->
<div class="section">
<h3>ğŸ§  AI Feedback</h3>
<p>{{feedback}}</p>
</div>

<!-- CATEGORY SUMMARY -->
<div class="section">
<h3>ğŸ“‚ Category Summary</h3>
<ul>
{% for s in summary %}
<li>{{s[0]}} - â‚¹{{s[1]}}</li>
{% endfor %}
</ul>
</div>

<!-- EXPENSE TABLE -->
<div class="section">
<h3>ğŸ§¾ Expenses</h3>
<table>
<tr>
<th>Amount</th>
<th>Description</th>
<th>Category</th>
<th>Delete</th>
</tr>

{% for e in expenses %}
<tr>
<td>â‚¹{{e[1]}}</td>
<td>{{e[2]}}</td>
<td>{{e[3]}}</td>
<td><a href="/delete/{{e[0]}}">âŒ</a></td>
</tr>
{% endfor %}

</table>
</div>

<!-- FOOTER -->
<div style="text-align:center;margin-top:15px;">
<a href="/dashboard">ğŸ”„ Refresh</a> |
<a href="/logout">ğŸšª Logout</a>
</div>

</div>

<!-- CHART SCRIPT -->
<script>
const income = {{income}};
const expense = {{expense}};

// BAR CHART
new Chart(document.getElementById('barChart'), {
    type: 'bar',
    data: {
        labels: ['Income', 'Expense'],
        datasets: [{
            label: 'â‚¹',
            data: [income, expense],
            backgroundColor: ['#2ecc71', '#e74c3c']
        }]
    }
});

// DONUT CHART
new Chart(document.getElementById('donutChart'), {
    type: 'doughnut',
    data: {
        labels: ['Expense'],
        datasets: [{
            data: [expense],
            backgroundColor: ['#27ae60']
        }]
    }
});
</script>

</body>
</html>
